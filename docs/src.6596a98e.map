{"version":3,"sources":["src/state.js","src/google-drive-api.js","src/google-drive-model.js","src/persons-view.js","src/overlay.js","src/index.js"],"names":["listeners","state","googleSyncEnabled","isSignedIn","persons","getState","setState","newState","dispatchUpdate","forEach","listener","addListener","push","APP_FOLDER","onSignInChangeHandler","Function","init","options","setupOptions","Promise","resolve","reject","gapi","load","initClient","then","onSignInChange","console","info","client","auth2","getAuthInstance","listen","updateSignInStatus","get","isInitiated","isLogged","connect","fetchData","signIn","getFolder","findFile","readFile","drive","files","list","q","execute","response","length","createFolder","id","metadata","name","mimeType","create","resource","folderId","file","fileId","alt","r","result","map","unescape","setup","update","getGoogleSyncButton","addEventListener","libLoaded","updateGoogleButton","updatePersons","isLoading","isEnabled","removeAttribute","document","querySelector","renderPersons","el","sort","sortByBirthday","renderPerson","person","appendChild","personA","personB","birthday","getDaysToBirthday","createElement","classList","add","renderTitle","renderBirthday","renderCustomTexts","customTexts","filter","Boolean","field","value","renderText","innerHTML","now","Date","date","getTime","diff","age","Math","abs","getUTCFullYear","isoDate","nowYear","getMonth","getDate","days","ceil","diffNext","renderSeen","reset","round","button","innerText","values","clearPersons","ELEMENTS","overlay","selector","show","loader","singIn","showElement","element","style"],"mappings":"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","file":"src.6596a98e.map","sourceRoot":"..","sourcesContent":["const listeners = []\nlet state = {\n\tgoogleSyncEnabled: false,\n\tisSignedIn: false,\n\tpersons: [],\n}\n\nconst getState = () => {\n\treturn state\n}\n\nconst setState = (newState) => {\n\tstate = {\n\t\t...state,\n\t\t...newState,\n\t}\n\tdispatchUpdate()\n}\n\nconst dispatchUpdate = () => {\n\tlisteners.forEach(listener => {\n\t\tlistener(getState())\n\t})\n}\n\nconst addListener = (listener) => {\n\tlisteners.push(listener)\n}\n\nexport {addListener, getState, dispatchUpdate, setState}\n","const APP_FOLDER = 'App-Personas'\nlet onSignInChangeHandler = Function\n\nconst init = (options = {}) => {\n\tsetupOptions(options)\n\treturn new Promise ((resolve, reject) => {\n\t\tgapi.load('client:auth2', () => {\n\t\t\tinitClient().then(resolve)\n\t\t})\n\t})\n}\n\nconst setupOptions = ({onSignInChange}) => {\n\tif (onSignInChange) onSignInChangeHandler = onSignInChange\n}\n\nconst initClient = () => {\n\tconsole.info('ðŸ‘‰', 'finding session...')\n\treturn new Promise ((resolve, reject) => {\n\t\tgapi.client.init({\n\t\t\t'apiKey': 'AIzaSyBYItpNT8k2Y2AEHz2E2kI2EqMULh5C4m0',\n\t\t\t'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'],\n\t\t\t'clientId': '614338309616-st9nui22tf3sa1cm9m1l3nd439n50frg.apps.googleusercontent.com',\n\t\t\t'scope': 'https://www.googleapis.com/auth/drive.file'\n\t\t})\n\t\t.then(() => {\n\t\t\tgapi.auth2.getAuthInstance().isSignedIn.listen(updateSignInStatus)\n\t\t\tupdateSignInStatus(gapi.auth2.getAuthInstance().isSignedIn.get())\n\t\t\tresolve({isInitiated: true})\n\t\t\t// if (gapi.auth2.getAuthInstance().isSignedIn.get()) {\n\t\t\t// \tconsole.info('ðŸ‘‰', 'session restored')\n\t\t\t// \tfetchData().then(resolve)\n\t\t\t// \tupdateSignInStatus()\n\t\t\t// } else {\n\t\t\t// \tconsole.info('ðŸ‘‰', 'no session stored')\n\t\t\t// \t// TODO: create empty persons.json\n\t\t\t// \tresolve([])\n\t\t\t// }\n\t\t})\n\t})\n}\n\nconst updateSignInStatus = (isLogged) => {\n\t// touhle metodou musim vyvolat rerender\n\tonSignInChangeHandler(isLogged)\n\t// if (!isLogged) return\n\t// fetchData()\n}\n\nconst connect = () => {\n\tconsole.info('ðŸ‘‰', 'manual connect')\n\tif (gapi.auth2.getAuthInstance().isSignedIn.get()) {\n\t\tconsole.info('ðŸ‘‰', 'already logged')\n\t\tfetchData()\n\t} else {\n\t\tconsole.info('ðŸ‘‰', 'signign in...')\n\t\tgapi.auth2.getAuthInstance().signIn()\n\t}\n}\n\nconst fetchData = () => {\n\treturn getFolder()\n\t.then(findFile)\n\t.then(readFile)\n}\n\nconst getFolder = () => {\n\treturn new Promise ((resolve, reject) => {\n\t\tconst request = gapi.client.drive.files.list({\n\t\t\tq: `name='${APP_FOLDER}' and trashed=false`,\n\t\t})\n\n\t\trequest.execute((response) => {\n\t\t\tif (response.files.length === 0) {\n\t\t\t\tcreateFolder().then(resolve)\n\t\t\t} else {\n\t\t\t\tresolve(response.files[0].id)\n\t\t\t}\n\t\t})\n\t})\n}\n\nconst createFolder = () => {\n\treturn new Promise ((resolve, reject) => {\n\t\tconsole.info('ðŸ‘‰', 'creating')\n\t\tconst metadata = {\n\t\t\tname: APP_FOLDER,\n\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t}\n\t\tconst request = gapi.client.drive.files.create({resource: metadata})\n\t\trequest.execute((response) => {\n\t\t\tconsole.info('ðŸ‘‰', 'created', response)\n\t\t\tresolve(response.id)\n\t\t})\n\t})\n}\n\nconst findFile = (folderId) => {\n\treturn new Promise ((resolve, reject) => {\n\t\tconsole.info('ðŸ‘‰', 'folderId', folderId)\n\t\tconst request = gapi.client.drive.files.list({\n\t\t\tq: `name=\"persons.json\" and '${folderId}' in parents`,\n\t\t})\n\t\trequest.execute((response) => {\n\t\t\tconsole.info('ðŸ‘‰', 'find file response', response)\n\t\t\tif (response.files.length === 0) {\n\t\t\t\t// create file\n\t\t\t\tresolve(null)\n\t\t\t} else {\n\t\t\t\tresolve(response.files[0])\n\t\t\t}\n\t\t})\n\t})\n}\n\nconst readFile = (file) => {\n\treturn new Promise ((resolve, reject) => {\n\t\tconst request = gapi.client.drive.files.get({\n\t\t\tfileId: file.id,\n\t\t\talt: 'media'\n\t\t})\n\t\trequest.execute((response) => {\n\t\t\tconst r = response.result.map(result => {\n\t\t\t\treturn {\n\t\t\t\t\t...result,\n\t\t\t\t\tname: unescape(result.name),\n\t\t\t\t}\n\t\t\t})\n\t\t\tresolve(r)\n\t\t})\n\t})\n}\n\nexport {\n\tconnect,\n\tinit,\n\tfetchData,\n}","import {connect, fetchData, init} from './google-drive-api.js'\nimport {addListener, dispatchUpdate, getState, setState} from './state.js'\n\nconst setup = () => {\n\taddListener(update)\n\tgetGoogleSyncButton().addEventListener('click', connect)\n}\n\nconst libLoaded = () => {\n\tconst options = {\n\t\tonSignInChange: onSignInChange,\n\t\t// TODO: apiKey, etc\n\t}\n\tinit(options).then((result) => {\n\t\tconst {isInitiated} = result\n\t\tsetState({'googleSyncEnabled': isInitiated})\n\t})\n}\n\nconst update = (state) => {\n\tupdateGoogleButton(state.googleSyncEnabled)\n}\n\nconst updatePersons = (persons) => {\n\tsetState({persons, isLoading: false})\n}\n\nconst onSignInChange = (isSignedIn) => {\n\tif (isSignedIn) {\n\t\tsetState({isSignedIn, isLoading: true})\n\t\tfetchData().then(updatePersons)\n\t} else {\n\t\tsetState({isSignedIn, isLoading: false})\n\t}\n}\n\nconst updateGoogleButton = (isEnabled) => {\n\tif (isEnabled) {\n\t\tgetGoogleSyncButton().removeAttribute('disabled')\n\t}\n}\n\nconst getGoogleSyncButton = () => {\n\treturn document.querySelector('button[data-prs=\"googleDriveButton\"]')\n}\n\nexport {libLoaded, setup}\n","const renderPersons = (persons) => {\n\tconst el = document.querySelector('.persons')\n\tpersons\n\t\t.sort(sortByBirthday)\n\t\t.map(renderPerson)\n\t\t.forEach(person => el.appendChild(person))\n}\n\nconst sortByBirthday = (personA, personB) => {\n\tif (!personA.birthday || !personB.birthday) return 0\n\treturn getDaysToBirthday(personA.birthday) - getDaysToBirthday(personB.birthday)\n}\n\nconst renderPerson = (person) => {\n\tconst el = document.createElement('div')\n\tel.classList.add('person')\n\tconst fields = [\n\t\trenderTitle(person.name),\n\t\trenderBirthday(person.birthday),\n\t\t// renderSeen(person.seen),\n\t\t...renderCustomTexts(person.customTexts),\n\t]\n\tfields\n\t.filter(Boolean)\n\t.forEach(field => el.appendChild(field))\n\treturn el\n}\n\nconst renderTitle = (value) => {\n\tconst el = renderText(value)\n\tel.classList.add('person-title')\n\treturn el\n}\n\nconst renderText = (value) => {\n\tconst el = document.createElement('div')\n\tel.innerHTML = value\n\treturn el\n}\n\nconst renderBirthday = (value) => {\n\tif (!value) return null\n\tconst now = Date.now()\n\tconst date = new Date(value).getTime()\n\tconst diff = new Date(now - date)\n\tconst age = Math.abs(diff.getUTCFullYear() - 1970)\n\tconst el = document.createElement('div')\n\tel.innerHTML = `Age: ${age}<br />Birthday in ${getDaysToBirthday(value)} days (${value})`\n\treturn el\n}\n\nconst getDaysToBirthday = (isoDate) => {\n\tif (!isoDate) return null\n\tconst birthday = new Date(isoDate)\n\tconst nowYear = new Date().getUTCFullYear()\n\tconst diff = Date.now() - new Date(`${nowYear}-${birthday.getMonth() + 1}-${birthday.getDate()}`).getTime()\n\tlet days\n\tif (diff < 0) {\n\t\t// this year\n\t\tdays = Math.abs(Math.ceil(diff / 1000 / 60 / 60 / 24))\n\t} else {\n\t\t// next year\n\t\tconst diffNext = Date.now() - new Date(`${nowYear + 1}-${birthday.getMonth() + 1}-${birthday.getDate()}`).getTime()\n\t\tdays = Math.abs(Math.ceil(diffNext / 1000 / 60 / 60 / 24))\n\t}\n\treturn days\n}\n\nconst renderSeen = (value) => {\n\tconst reset = () => {\n\t\tconsole.info('ðŸ‘‰', 'resettings')\n\t}\n\tconst now = Date.now()\n\tconst date = new Date(value).getTime()\n\tconst days = Math.round((now - date) / 1000 / 60 / 60/ 24)\n\tconst el = document.createElement('div')\n\tconst button = document.createElement('button')\n\tbutton.innerText = 'Dnes'\n\tbutton.addEventListener('click', reset)\n\tel.innerHTML = `VidÄ›li jsme se pÅ™ed: ${days} dny.`\n\tel.appendChild(button)\n\treturn el\n}\n\nconst renderCustomTexts = (values) => {\n\tif (!values) return []\n\treturn values.map(renderText)\n}\n\nconst clearPersons = () => {\n\tconst el = document.querySelector('.persons')\n\tel.innerHTML = ''\n}\n\nexport {clearPersons, renderPersons}\n","import {addListener} from './state.js'\n\nconst ELEMENTS = {\n\toverlay: {\n\t\tselector: 'div[data-prs=\"overlay\"]',\n\t\tshow: 'flex',\n\t},\n\tloader: {\n\t\tselector: 'div[data-prs=\"loader\"]',\n\t\tshow: 'block',\n\t},\n\tsingIn: {\n\t\tselector: 'button[data-prs=\"googleDriveButton\"]',\n\t\tshow: 'block',\n\t},\n}\n\nconst update = (state) => {\n\tshowElement(ELEMENTS.loader, state.isLoading)\n\tshowElement(ELEMENTS.singIn, !state.isSignedIn)\n\tshowElement(ELEMENTS.overlay, state.isLoading || !state.isSignedIn)\n}\n\nconst showElement = (element, show) => {\n\tconst el = document.querySelector(element.selector)\n\tel.style['display'] = show ? element.show : 'none'\n}\n\nexport const setup = () => {\n\taddListener(update)\n}\n","import {addListener} from './state.js'\nimport {libLoaded as googleLibLoaded, setup as setupGoogleDrive} from './google-drive-model.js'\nimport {clearPersons, renderPersons} from './persons-view.js'\nimport {setup as setupOverlay} from './overlay.js'\n\nconst setup = () => {\n\tsetupGoogleDrive()\n\tsetupOverlay()\n\taddListener(update)\n}\n\nconst update = (state) => {\n\tupdatePersons(state.persons)\n}\n\nconst updatePersons = (persons) => {\n\tclearPersons()\n\trenderPersons(persons)\n}\n\nexport {\n\tgoogleLibLoaded,\n\tsetup,\n}\n\n"]}